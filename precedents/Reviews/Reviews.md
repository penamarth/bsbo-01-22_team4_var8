# Прецедент: "Оценка и отзывы"

**Информационная система жилищного агентства.**

## Уровень
Задача, определенная пользователем.

## Основной исполнитель
Квартиросъёмщик (Tenant) или Владелец недвижимости (Owner).

## Заинтересованные лица и их требования

- **Квартиросъёмщик (Tenant).**
  - Хочет оставить отзыв о завершённой аренде, чтобы поделиться своим опытом и помочь другим пользователям.

- **Владелец (Owner).**
  - Хочет получать обратную связь от арендаторов для улучшения качества обслуживания и условий аренды.

- **Компания (владелец платформы).**
  - Хочет поддерживать систему прозрачных и честных отзывов, чтобы повысить доверие к платформе.

## Предусловия

- Пользователь зарегистрирован и аутентифицирован в системе.
- Аренда завершена, и статус бронирования установлен как "Completed".

## Результаты (Постусловия)

- Отзыв успешно добавлен в список отзывов, связанных с объектом недвижимости или пользователем.
- Уведомления отправлены заинтересованным сторонам через механизм **Observer**.

## Основной успешный сценарий

1. **Получение завершённых бронирований:**
   - Пользователь вызывает метод `BookingManager.getBookingsByUser(userID)` для получения списка всех своих бронирований.
   - Система фильтрует бронирования, оставляя только завершённые (`Booking.Status == "Completed"`).

2. **Выбор завершённого бронирования:**
   - Пользователь выбирает бронирование, связанное с объектом недвижимости.

3. **Создание отзыва:**
   - Пользователь вводит текст отзыва и рейтинг.
   - Отзыв добавляется в список отзывов, связанный с объектом недвижимости (`Property`).

4. **Уведомление пользователей:**
   - Система создаёт объект `Notification` и вызывает метод `Property.notifyObservers(notification)` для уведомления владельца недвижимости или арендатора.

## Варианты альтернативных сценариев

### *1.1 Аренда не завершена*

1. **Система** обнаруживает, что бронирование ещё не завершено (статус отличается от "Completed").
2. **Система** уведомляет пользователя о невозможности оставить отзыв.

### *2.1 Некорректный ввод данных*

1. **Система** проверяет введённые данные отзыва (рейтинг и текст).
2. Если данные некорректны (например, рейтинг вне допустимых границ), система уведомляет пользователя и предлагает исправить данные.

## Специальные требования

- Отзывы должны быть модерабельны для предотвращения недостоверной информации или оскорблений.
- Отзывы должны быть связаны с конкретным объектом недвижимости или пользователем.
- Уведомления должны отправляться всем заинтересованным сторонам.

## Список технологий и типов данных

- Отзывы хранятся в виде объектов `Review`, связанных с `Property` или `User`.
- Уведомления обрабатываются через механизм **Observer** (`Property.notifyObservers(notification)`).

## Частота использования

- Высокая частота использования после завершения аренды.

## Открытые вопросы

- Следует ли добавлять возможность редактирования отзывов после их публикации?
- Нужно ли предусмотреть возможность оставлять отзывы анонимно?
- Как часто владелец или арендатор должны получать уведомления об отзывах?
