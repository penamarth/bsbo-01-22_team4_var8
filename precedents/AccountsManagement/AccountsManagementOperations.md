# Описание Системных Операций

## 1. Операция: `loadData(userID: UserID)`

**Ссылки:**  
Прецеденты: Управление учетной записью и данными

**Предусловия:**
- Пользователь аутентифицирован в системе и имеет активную сессию.
- База данных доступна для чтения информации учетной записи.
- Пользователь инициировал действие для загрузки информации учетной записи.

**Постусловия:**
- Система загрузила текущие данные учетной записи и отобразила их пользователю.
- Данные готовы для возможного редактирования пользователем.

**Действия:**
1. Система вызывает метод `UserAccount::loadData(userID)`.
2. Информация об учетной записи, включая контактные и платежные данные, загружается из базы данных.
3. Данные отображаются пользователю для редактирования.

---

## 2. Операция: `validateData(data: UserData)`

**Ссылки:**  
Прецеденты: Управление учетной записью и данными (Редактирование личных данных)

**Предусловия:**
- Пользователь внес изменения в данные учетной записи и инициировал сохранение.
- Система настроена на проверку данных по заданным форматам, включая контактную информацию и платежные данные.

**Постусловия:**
- Введенные данные проверены на соответствие формату, допустимым значениям и внутренним правилам системы.
- При обнаружении ошибок система готова уведомить пользователя.

**Действия:**
1. Система вызывает метод `UserAccount::validateData(data)`.
2. Выполняется проверка формата данных, таких как телефон, email и адрес.
3. При наличии ошибок метод возвращает сообщение об ошибке и подсвечивает некорректные поля.

---

## 3. Операция: `saveChanges(userID: UserID, data: UserData)`

**Ссылки:**  
Прецеденты: Управление учетной записью и данными (Редактирование личных данных)

**Предусловия:**
- Данные учетной записи успешно прошли проверку на корректность.
- Пользователь подтвердил изменения и система подготовлена к записи данных.

**Постусловия:**
- Обновленные данные учетной записи сохранены и актуализированы в системе.
- Пользователь получает подтверждение о завершении операции.

**Действия:**
1. Система вызывает метод `UserAccount::saveChanges(userID, data)`.
2. Обновленные данные сохраняются в базе.
3. Пользователь получает уведомление о сохранении данных.

---

## 4. Операция: `updateDetails(userID: UserID, paymentInfo: PaymentInfo)`

**Ссылки:**  
Прецеденты: Управление учетной записью и данными (Изменение платежной информации)

**Предусловия:**
- Пользователь инициировал изменение платежной информации и предоставил необходимые данные.
- Платёжная система находится в рабочем состоянии для приёма обновлений.

**Постусловия:**
- Платёжная информация пользователя обновлена и сохранена в системе.
- Пользователь уведомлен об успешном обновлении данных.

**Действия:**
1. Система вызывает метод `Payment::updateDetails(userID, paymentInfo)`.
2. Платежная информация обновляется в системе и сохраняется.
3. Пользователь уведомляется о том, что данные обновлены.

---

## 5. Операция: `confirmDeletion(userID: UserID)`

**Ссылки:**  
Прецеденты: Управление учетной записью и данными (Удаление учетной записи)

**Предусловия:**
- Пользователь инициировал удаление учетной записи и готов подтвердить действие.
- Система обеспечивает интерфейс подтверждения, предупреждающий о необратимости действия.

**Постусловия:**
- Подтверждение удаления получено, и система готова завершить процесс удаления.

**Действия:**
1. Система вызывает метод `UserAccount::confirmDeletion(userID)`.
2. Пользователю отправляется уведомление о последствиях удаления.
3. Ожидается подтверждение от пользователя.

---

## 6. Операция: `delete(userID: UserID)`

**Ссылки:**  
Прецеденты: Управление учетной записью и данными (Удаление учетной записи)

**Предусловия:**
- Пользователь подтвердил намерение удалить учетную запись.
- Система готова безопасно удалить все данные пользователя.

**Постусловия:**
- Учетная запись пользователя удалена из системы, и дальнейшая обработка данных остановлена.
- Лог удаления сохранен для аудита.

**Действия:**
1. Система вызывает метод `UserAccount::delete(userID)`.
2. Данные пользователя удаляются из базы данных.
3. Система логирует факт удаления учетной записи для аудита.

---

## 7. Операция: `notifyUser(userID: UserID, message: String)`

**Ссылки:**  
Прецеденты: Управление учетной записью и данными (Уведомление о действиях)

**Предусловия:**
- Событие, требующее уведомления пользователя, успешно завершено.
- Каналы связи для уведомления активны и доступны.

**Постусловия:**
- Пользователь уведомлен об изменении в учетной записи.

**Действия:**
1. Система вызывает метод `NotificationService::notifyUser(userID, message)`.
2. Уведомление отправляется пользователю через предпочитаемый канал связи (email или SMS).
3. Лог уведомлений сохраняется в системе для последующего отслеживания.

---

## 8. Операция: `showErrors(data: UserData)`

**Ссылки:**  
Прецеденты: Управление учетной записью и данными (альтернативный поток: Пользователь указывает некорректные данные)

**Предусловия:**
- Введенные данные не соответствуют требованиям системы и содержат ошибки.
- Система настроена на возврат ошибок пользователю в удобном формате.

**Постусловия:**
- Пользователь уведомлен о некорректных данных, которые необходимо исправить.

**Действия:**
1. Система вызывает метод `UserAccount::showErrors(data)`.
2. Пользователь получает уведомление о некорректных данных с указанием полей, требующих исправления.

---

## 9. Операция: `requireUpdate()`

**Ссылки:**  
Прецеденты: Управление учетной записью и данными (альтернативный поток: Удаление платежных данных без замены)

**Предусловия:**
- Пользователь запросил удаление платежных данных без добавления новых.
- Система должна уведомить о необходимости обновления данных для продолжения использования.

**Постусловия:**
- Пользователь уведомлен о необходимости указать новые платежные данные для завершения операции.

**Действия:**
1. Система вызывает метод `Payment::requireUpdate()`.
2. Пользователю отображается сообщение о необходимости добавить новые платежные реквизиты.

---

## 10. Операция: `showDeletedMessage()`

**Ссылки:**  
Прецеденты: Управление учетной записью и данными (альтернативный поток: Восстановление удаленной учетной записи)

**Предусловия:**
- Пользователь пытается войти в систему после удаления учетной записи.
- Система определяет, что учетная запись была ранее удалена.

**Постусловия:**
- Пользователь уведомлен, что учетная запись удалена и не подлежит восстановлению.

**Действия:**
1. Система вызывает метод `UserAccount::showDeletedMessage()`.
2. Пользователь видит сообщение о том, что учетная запись не подлежит восстановлению.

---

## 11. Операция: `notifyError(userID: UserID, errorDetails: String)`

**Ссылки:**  
Прецеденты: Управление учетной записью и данными (альтернативный поток: Ошибка при сохранении данных)

**Предусловия:**
- Система столкнулась с ошибкой при сохранении данных.
- Пользователь должен быть уведомлен о возникшей проблеме.

**Постусловия:**
- Пользователь проинформирован о временной ошибке и предложено попробовать снова позже.

**Действия:**
1. Система вызывает метод `UserAccount::notifyError(userID, errorDetails)`.
2. Пользователь получает уведомление с рекомендацией повторить попытку позже.

---

## 12. Операция: `checkInactivity()`

**Ссылки:**  
Прецеденты: Управление учетной записью и данными (расширение: Периодическая проверка активности учетной записи)

**Предусловия:**
- Периодичность проверки активности установлена администратором.
- Система активна и может отправлять уведомления.

**Постусловия:**
- Система проверила активность всех учетных записей и уведомила администратора о длительно неактивных пользователях.

**Действия:**
1. Система вызывает метод `Admin::checkInactivity()` для запуска проверки активности.
2. Администратор получает отчет о длительной неактивности учетных записей.

---

## 13. Операция: `remindInactivity(userID: UserID)`

**Ссылки:**  
Прецеденты: Управление учетной записью и данными (расширение: Периодическая проверка активности учетной записи)

**Предусловия:**
- Система определила, что учетная запись была неактивна в течение длительного периода.
- Пользователь все еще зарегистрирован в системе.

**Постусловия:**
- Пользователь уведомлен о длительном отсутствии активности и предложено подтвердить продолжение использования.

**Действия:**
1. Система вызывает метод `UserAccount::remindInactivity(userID)`.
2. Пользователь получает уведомление с предложением вернуться или удалить учетную запись.

---

## 14. Операция: `restoreSession(userID: UserID)`

**Ссылки:**  
Прецеденты: Управление учетной записью и данными (расширение: Восстановление доступа к учетной записи после сбоя)

**Предусловия:**
- Система восстановлена после сбоя, и пользователь обращается для продолжения сессии.
- Данные учетной записи доступны для восстановления.

**Постусловия:**
- Пользователь возвращен к последнему действию до сбоя, и работа с системой продолжается.

**Действия:**
1. Администратор перезапускает систему и вызывает метод `UserAccount::restoreSession(userID)`.
2. Пользователь возвращается к последнему выполненному действию до сбоя.