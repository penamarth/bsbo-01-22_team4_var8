# Прецедент: "Обсуждение и решение проблем"

**Информационная система жилищного агентства**

**Уровень**: Средний уровень (Use Case), определённый системой.

**Основной исполнитель**: Квартиросъёмщик, Владелец недвижимости.

## Заинтересованные лица и их требования

- **Квартиросъёмщик**:
  - Хочет иметь возможность сообщать о проблемах или неисправностях в арендованном жилье.
  - Требует своевременного ответа и решения проблем от владельца.
  - Ожидает прозрачности процесса решения проблем и возможности отслеживать статус их разрешения.

- **Владелец недвижимости**:
  - Хочет получать уведомления о сообщенных проблемах от арендаторов.
  - Требует инструментов для эффективного управления и решения возникающих проблем.
  - Ожидает возможности общаться с арендаторами для уточнения деталей и подтверждения выполнения работ.

- **Администратор системы**:
  - Хочет следить за качеством и своевременностью решения проблем.
  - Требует возможности вмешательства в случае конфликтов или нерешённых проблем.
  - Ожидает инструментов для мониторинга и генерации отчетов по решению проблем.

- **Компания (владелец платформы)**:
  - Хочет поддерживать высокий уровень удовлетворённости пользователей системой.
  - Требует анализа данных по решению проблем для улучшения сервисов и процессов платформы.

## Предусловия

- Пользователь (квартиросъёмщик или владелец) зарегистрирован и аутентифицирован в системе.
- Между квартиросъёмщиком и владельцем существует активный договор аренды.
- У пользователя есть доступ к функционалу обсуждения и решения проблем.

## Результаты (Постусловия)

- Проблема успешно зарегистрирована и отображается в системе.
- Владелец недвижимости получил уведомление о новой проблеме.
- Статус проблемы обновляется по мере её решения.
- Пользователи могут отслеживать ход решения проблемы.
- Администратор системы имеет доступ к истории проблем и их решениям.
- Система уведомляет пользователей о изменениях статуса проблемы.

## Основной успешный сценарий

1. **Инициация проблемы**:
    - Квартиросъёмщик заходит в свой личный кабинет и выбирает опцию "Сообщить о проблеме".
    - Владелец недвижимости заходит в свой личный кабинет и выбирает опцию "Просмотреть проблемы".

2. **Заполнение формы сообщения о проблеме**:
    - Система отображает форму для ввода деталей проблемы, включая описание, приоритет, фотографии или документы.
    - Квартиросъёмщик заполняет необходимые поля и отправляет форму.
    - Владелец недвижимости получает уведомление о новой проблеме.

3. **Просмотр и подтверждение проблемы владельцем**:
    - Владелец просматривает детали проблемы в своем личном кабинете.
    - При необходимости владелец связывается с квартиросъёмщиком для уточнения деталей через встроенный чат или систему сообщений.
    - Владелец подтверждает получение сообщения и устанавливает план действий по решению проблемы.

4. **Решение проблемы**:
    - Владелец предпринимает необходимые действия для устранения проблемы (например, вызывает ремонтную бригаду).
    - Владелец обновляет статус проблемы в системе (например, "В процессе", "Решено").
    - Квартиросъёмщик получает уведомление о изменении статуса проблемы.

5. **Закрытие проблемы**:
    - После решения проблемы владелец обновляет статус на "Решено" и добавляет комментарий о выполненных действиях.
    - Квартиросъёмщик подтверждает удовлетворённость решением проблемы или предоставляет обратную связь.
    - Проблема закрывается, и оба пользователя получают соответствующие уведомления.

## Варианты альтернативных решений

### 1.1 Квартиросъёмщик пытается сообщить о проблеме без активного договора аренды
1. Квартиросъёмщик заходит в раздел "Сообщить о проблеме".
2. Система проверяет наличие активного договора аренды.
3. Если договора нет, система отображает сообщение: "Невозможно сообщить о проблеме без активного договора аренды."

### 2.1 Проблема требует дополнительной информации
1. Квартиросъёмщик заполняет форму сообщения о проблеме и отправляет её.
2. Владелец недвижимости просматривает сообщение и требует дополнительную информацию.
3. Владелец связывается с квартиросъёмщиком через встроенный чат или систему сообщений.
4. Квартиросъёмщик предоставляет запрашиваемую информацию.
5. Владелец подтверждает получение информации и приступает к решению проблемы.

### 3.1 Проблема не решена в установленный срок
1. Проблема остаётся в статусе "В процессе" дольше, чем предусмотрено.
2. Система автоматически уведомляет администратора системы о просрочке.
3. Администратор вмешивается, связывается с владельцем и квартиросъёмщиком для ускорения решения проблемы.
4. Администратор обновляет статус проблемы и уведомляет пользователей.

### 4.1 Пользователь решает отменить сообщение о проблеме
1. Квартиросъёмщик или владелец недвижимости заходит в раздел "Мои проблемы".
2. Выбирает проблему для отмены.
3. Подтверждает отмену сообщения о проблеме.
4. Система удаляет проблему или обновляет её статус на "Отменено".
5. Пользователи получают уведомление об отмене.

## Расширения (или альтернативные потоки)

### a. Обсуждение через встроенный чат
1. После регистрации проблемы, система предоставляет возможность пользователям общаться через встроенный чат.
2. Квартиросъёмщик и владелец недвижимости могут обсуждать детали проблемы и возможные решения в реальном времени.
3. Все сообщения сохраняются в истории проблемы для дальнейшего анализа.

### b. Эскалация проблемы администратору
1. Если проблема не решается владельцем в течение установленного времени, система позволяет пользователю (квартиросъёмщику) эскалировать проблему.
2. Администратор получает уведомление об эскалации и берёт проблему под своё управление.
3. Администратор связывается с владельцем и квартиросъёмщиком для урегулирования ситуации.
4. Проблема решается или перенаправляется на соответствующие отделы.

### c. Автоматическое напоминание о незавершённых проблемах
1. Система автоматически отправляет напоминания владельцу недвижимости о незавершённых проблемах.
2. Напоминания отправляются через определённые интервалы времени до тех пор, пока проблема не будет решена или не будет принята мера.

## Специальные требования

- **Трекинг и история**:
  - Система должна сохранять полную историю всех сообщений и действий, связанных с проблемой.
  - Пользователи могут просматривать историю для отслеживания прогресса решения.

- **Уведомления**:
  - Все значимые события (создание проблемы, изменения статуса, комментарии) должны сопровождаться уведомлениями через email и push-уведомления.
  
- **Приоритеты и категории**:
  - Пользователи могут устанавливать приоритеты для проблем (низкий, средний, высокий).
  - Проблемы классифицируются по категориям (например, технические неисправности, вопросы безопасности, вопросы оплаты).

- **Безопасность и конфиденциальность**:
  - Доступ к сообщениям и информации о проблемах должен быть ограничен соответствующими пользователями и администраторами.
  - Все данные передаются и хранятся с использованием шифрования (SSL/TLS).

- **Интерфейс пользователя**:
  - Интуитивно понятный интерфейс для создания, просмотра и управления проблемами.
  - Возможность прикрепления файлов и фотографий для иллюстрации проблем.

- **Безопасность**:
  - Шифрование данных с использованием SSL/TLS.
  - Защита от SQL-инъекций и XSS-атак при обработке пользовательского ввода.

- **Дополнительные технологии**:
  - Реализация встроенного чата с использованием WebSocket для реального времени.

## Частота использования

- Ожидается, что пользователи будут сообщать о проблемах по мере их возникновения.
- Высокая активность в периоды интенсивного использования системы (например, сезонные пики аренды, начало учебного года).

## Открытые вопросы

- **Методы эскалации**: Какие критерии определяют необходимость эскалации проблемы администратору?
- **Ограничения по времени**: Каковы допустимые сроки решения различных типов проблем?
- **Интеграция с внешними сервисами**: Нужно ли интегрировать систему с внешними сервисами для управления ремонтом или технической поддержкой?
- **Управление доступом**: Какие уровни доступа необходимы для различных ролей пользователей при работе с проблемами?