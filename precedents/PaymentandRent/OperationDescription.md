# Описание системных операций

## 1. Операция: `createBooking(booking: Booking): UUID`

**Ссылки:**  
Прецедент: Оплата и заключение договора аренды

**Предусловия:**
- Квартиросъёмщик выбрал жильё для аренды.
- Все данные для бронирования предоставлены.

**Постусловия:**
- Бронирование успешно зафиксировано в системе.
- Платёж обработан и подтверждён.
- Возвращён уникальный идентификатор бронирования (`UUID`).

**Действия:**
1. Квартиросъёмщик инициирует создание бронирования, предоставляя необходимые данные.
2. Система вызывает метод `BookingSystemFacade.createBooking(booking)`.
3. Метод `BookingSystemFacade.createBooking(booking)` перенаправляет вызов к `BookingManager.createBooking(booking)`.
4. Метод `BookingManager.createBooking(booking)` обрабатывает платёж и создаёт запись бронирования с уникальным `UUID`.
5. Метод `BookingManager.createBooking(booking)` возвращает `UUID` созданного бронирования.
6. Система возвращает `UUID` бронирования квартиросъёмщику.

---

## 2. Операция: `cancelBooking(bookingID: UUID): void`

**Ссылки:**  
Прецедент: Оплата и заключение договора аренды (альтернативный сценарий)

**Предусловия:**
- Бронирование с указанным идентификатором существует и активно.
- Квартиросъёмщик решил отменить бронирование.

**Постусловия:**
- Бронирование отменено, статус обновлён.
- Владелец уведомлён об отмене бронирования.

**Действия:**
1. Квартиросъёмщик инициирует отмену бронирования, предоставляя `bookingID`.
2. Система вызывает метод `BookingSystemFacade.cancelBooking(bookingID)`.
3. Метод `BookingSystemFacade.cancelBooking(bookingID)` перенаправляет вызов к `BookingManager.cancelBooking(bookingID)`.
4. Метод `BookingManager.cancelBooking(bookingID)` обновляет статус бронирования на "отменено".
5. Метод `BookingManager.cancelBooking(bookingID)` завершает процесс отмены.
6. Система уведомляет владельца через метод `PropertyManager.getPropertyByID(propertyID)` и `Property.notifyObservers(notification)`.

---

## 3. Операция: `formRentalAgreement(): Agreement`

**Ссылки:**  
Прецедент: Оплата и заключение договора аренды

**Предусловия:**
- Бронирование успешно создано и оплачено.

**Постусловия:**
- Электронный договор аренды сформирован.

**Действия:**
1. Метод `Booking.formRentalAgreement()` вызывается для формирования договора аренды.
2. Внутри метода создаётся объект `Agreement` с необходимыми данными.
3. Объект `Agreement` связывается с текущим бронированием.

---

## 4. Операция: `getPropertyByID(propertyID: UUID): Property`

**Ссылки:**  
Прецедент: Оплата и заключение договора аренды

**Предусловия:**
- Объект недвижимости с указанным идентификатором существует.

**Постусловия:**
- Данные об объекте недвижимости возвращены.

**Действия:**
1. Система вызывает метод `getPropertyByID(propertyID)`.
2. Метод `BookingSystemFacade` перенаправляет вызов к `PropertyManager.getPropertyByID(propertyID)`.
3. Метод `PropertyManager.getPropertyByID(propertyID)` возвращает объект `Property` с деталями недвижимости.
4. Система использует полученные данные для формирования уведомления.

---

## 5. Операция: `notifyObservers(notification: Notification): void`

**Ссылки:**  
Прецедент: Оплата и заключение договора аренды

**Предусловия:**
- Уведомление сформировано и передано в систему.

**Постусловия:**
- Все подписчики уведомлены.

**Действия:**
1. Система создает объект `Notification` с необходимой информацией.
2. Система вызывает метод `Property.notifyObservers(notification)` для отправки уведомления владельцу.
3. Метод `notifyObservers` в классе `Property` отправляет уведомление всем подписчикам (в данном случае владельцу) через метод `User.update(notification)`.
4. Владелец получает уведомление о создании или отмене бронирования.

---

## 6. Операция: `update(notification: Notification): void`

**Ссылки:**  
Прецедент: Оплата и заключение договора аренды

**Предусловия:**
- Уведомление отправлено через `notifyObservers(notification)`.

**Постусловия:**
- Пользователь (владелец) получил уведомление.

**Действия:**
1. Метод `update(notification)` вызывается у подписчика (`User`).
2. Владелец обрабатывает полученное уведомление и отображает его.

---
