# Прецедент: "Подбор жилья"

**Информационная система жилищного агентства.**

## Уровень
Задача, определенная пользователем.

## Основной исполнитель
Квартиросъёмщик (Tenant).

## Заинтересованные лица и их требования

- **Квартиросъёмщик (Tenant).**
  - Хочет найти жилье, используя доступные средства системы.
  - Хочет просмотреть подробную информацию о выбранном жилье.
  - Хочет приступить к бронированию выбранного жилья.
  - Хочет иметь возможность отменить бронирование при необходимости.

- **Владелец (Owner).**
  - Хочет, чтобы его объявления о жилье были доступны для бронирования.
  - Хочет получать уведомления о создании, обновлении или отмене бронирований для своей недвижимости.

- **Администратор системы (Administrator).**
  - Хочет убедиться, что данные о жилье корректны и актуальны.
  - Хочет следить за эффективностью работы системы.
  - Хочет управлять пользователями и бронированиями.

- **Компания (владелец платформы).**
  - Хочет поддерживать высокое качество работы системы для увеличения количества сделок.

## Предусловия

- Квартиросъёмщик зарегистрирован и аутентифицирован в системе.
- Владелец загрузил информацию о доступном жилье, включая описание, фотографии, цену и условия аренды.

## Результаты (Постусловия)

- Квартиросъёмщик подобрал подходящее жилье и создал бронирование.
- Владелец получил уведомление о создании нового бронирования его недвижимости.
- Система обновила информацию о забронированных объектах.
- При необходимости, квартиросъёмщик может отменить бронирование, и владелец получит соответствующее уведомление.

## Основной успешный сценарий

1. **Поиск жилья:**
   - Квартиросъёмщик вводит свои критерии поиска (местоположение, цена, количество комнат и т.д.) на странице поиска.
   - Система вызывает метод `BookingSystemFacade.getPropertiesByOwner(ownerID)` для получения списка доступных объектов, соответствующих критериям.

2. **Просмотр результатов:**
   - Квартиросъёмщик просматривает список жилья и выбирает интересующий его объект.
   - Система вызывает метод `BookingSystemFacade.getPropertyByID(propertyID)` для отображения подробной информации о выбранном жилье, включая описание и цену.

3. **Начало бронирования:**
   - Квартиросъёмщик решает забронировать выбранное жилье.
   - Система вызывает метод `BookingSystemFacade.createBooking(booking)` для создания нового бронирования, где `booking` содержит `propertyID`, `tenantID`, даты бронирования и другие необходимые данные.
   - Система подтверждает успешное создание бронирования и отображает соответствующее уведомление пользователю.

4. **Уведомление владельца:**
   - После успешного создания бронирования система автоматически уведомляет владельца о создании нового бронирования через механизм **Observer**.
   - Владелец получает уведомление о новом бронировании его недвижимости.

5. **Отмена бронирования (по желанию):**
   - Квартиросъёмщик решает отменить бронирование.
   - Система вызывает метод `BookingSystemFacade.cancelBooking(bookingID)` для отмены бронирования.
   - Система подтверждает успешную отмену бронирования и уведомляет владельца о данной операции.

## Варианты альтернативных сценариев

### *1.1 Квартиросъёмщик не нашёл подходящего жилья

1. **Система** сообщает, что нет доступных объектов, соответствующих заданным критериям.
2. **Квартиросъёмщик** изменяет критерии поиска и повторяет попытку через метод `BookingSystemFacade.getPropertiesByOwner(newOwnerID)`.

### *2.1 Ошибка при создании бронирования

1. **Система** обнаруживает ошибку при попытке создать бронирование (например, объект уже забронирован).
2. **Система** сообщает квартиросъёмщику об ошибке и предлагает выбрать другой объект или попробовать снова позже.

### *3.1 Ошибка при отмене бронирования

1. **Система** обнаруживает ошибку при попытке отменить бронирование (например, бронь уже завершена).
2. **Система** сообщает квартиросъёмщику об ошибке и предлагает связаться с поддержкой.

## Специальные требования

- Процесс бронирования должен быть интуитивным и быстрым, с минимальной задержкой при создании бронирования.
- Система должна предоставлять актуальную информацию о доступности жилья.
- Система должна обеспечивать надежное уведомление владельцев о созданных и отмененных бронированиях.
- Система должна обеспечивать безопасность данных пользователей и бронирований.

## Список технологий и типов данных

- Данные о жилье включают описание, фотографии, цену, количество комнат и условия аренды.
- Бронирование включает информацию о жилье, арендаторе, датах бронирования и статусе.
- Все операции взаимодействия с пользователями и уведомлениями реализуются через методы фасада и паттерн **Observer**.

## Частота использования

- Ожидается частое использование функции бронирования, особенно в пиковые периоды (сезон отпусков, начало учебного года).

## Открытые вопросы

- Нужно ли добавить дополнительные атрибуты для бронирования, такие как специальные требования арендатора?
- Как можно улучшить процесс уведомления владельцев для повышения оперативности реакции?
- Необходимо ли интегрировать систему с внешними сервисами оплаты для автоматического подтверждения бронирований?
