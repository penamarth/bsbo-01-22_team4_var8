# Описание прецедента: "Управление бронированием"

**Информационная система жилищного агентства.**

Уровень. Задача, определенная пользователем.

Основные исполнители: Квартиросъёмщик, Владелец.

**Заинтересованные лица и их требования:**

- **Квартиросъёмщик (пользователь).** Хочет управлять своим бронированием, просматривать статус, изменять или отменять бронирование при необходимости.
- **Владелец (пользователь).** Хочет получать уведомления о бронированиях своего жилья, а также иметь возможность подтвердить, изменить или отклонить бронирование.
- **Администратор системы.** Хочет убедиться, что все операции бронирования происходят корректно, с возможностью отслеживания действий пользователей.
- **Компания (владелец платформы).** Хочет поддерживать безопасные и четкие процессы бронирования, обеспечивая соответствие законодательным нормам и правилам.

**Предусловия:**

- Квартиросъёмщик и владелец зарегистрированы и аутентифицированы в системе.
- Квартиросъёмщик ранее выбрал жилье и инициировал процесс бронирования.

**Результаты (Постусловия):**

- Бронирование успешно подтверждено, изменено или отменено в зависимости от действий пользователя.
- Владелец уведомлен о состоянии бронирования (подтверждено, отменено, изменено).
- Система обновила данные о доступности жилья и статусе бронирования.

**Основной успешный сценарий:**

1. **Просмотр текущего бронирования:**
   - Квартиросъёмщик переходит в раздел управления бронированием и видит текущее бронирование.
   - Система вызывает метод `Booking::getStatus()` для получения актуальной информации о статусе бронирования.

2. **Изменение или отмена бронирования квартиросъёмщиком:**
   - Квартиросъёмщик выбирает опцию изменить или отменить бронирование.
   - Система вызывает метод `Booking::modify()` для изменения деталей бронирования или `Booking::cancel()` для его отмены.

3. **Подтверждение или изменение бронирования владельцем:**
   - Владелец получает уведомление о новом бронировании через метод `notifyUser(owner_id, message)`.
   - Владелец может подтвердить, изменить или отклонить бронирование через метод `Booking::confirm()` или `Booking::reject()`.

4. **Уведомление участников:**
   - Система уведомляет квартиросъёмщика и владельца о любых изменениях в бронировании через метод `notifyUser()`.

**Варианты альтернативных решений:**

   *1.1 Квартиросъёмщик не может изменить бронирование:
      1. **Система** отображает сообщение о невозможности изменения бронирования (например, если осталось слишком мало времени до начала аренды).
      2. **Квартиросъёмщик** может связаться с владельцем через встроенный чат для обсуждения ситуации.

   *2.1 Владелец отклоняет бронирование:
      1. **Владелец** отклоняет запрос на бронирование через интерфейс системы.
      2. **Система** вызывает метод `Booking::reject()`, уведомляя квартиросъёмщика об отказе.

   *2.2 Квартиросъёмщик запрашивает продление бронирования:
      1. **Квартиросъёмщик** запрашивает продление текущего бронирования.
      2. **Система** вызывает метод `Booking::extend()` для проверки возможности продления и уведомляет владельца.

**Специальные требования:**

- Система должна обеспечивать удобное управление бронированиями, с возможностью просматривать детали, изменять или отменять бронирования.
- Все изменения бронирований должны быть немедленно зафиксированы и отражены в системе.

**Список технологий и типов данных:**

- Информация о бронировании включает даты, стоимость, статус (подтверждено, ожидает подтверждения, отменено).
- Данные передаются между пользователями и владельцами через встроенные уведомления и чаты.

**Частота использования:**

- Средняя частота использования, увеличивающаяся в пиковые периоды, когда количество бронирований возрастает (например, в сезон отпусков).

**Открытые вопросы:**

- Нужно ли предусмотреть возможность автоматического продления бронирования без участия владельца?
- Какие дополнительные параметры можно включить в процесс изменения бронирования (например, изменения условий оплаты)?