# Описание прецедента: "Управление бронированием"

**Информационная система жилищного агентства.**

**Уровень:** Задача, определенная пользователем.

## Основные исполнители:
- Квартиросъёмщик
- Владелец

## Заинтересованные лица и их требования:
- **Квартиросъёмщик (пользователь):** Хочет управлять своими бронированиями, просматривать статус, изменять или отменять бронирование при необходимости.
- **Владелец (пользователь):** Хочет получать уведомления о бронированиях своего жилья, а также иметь возможность подтвердить, изменить или отклонить бронирование.
- **Администратор системы:** Хочет убедиться, что все операции бронирования происходят корректно, с возможностью отслеживания действий пользователей.
- **Компания (владелец платформы):** Хочет поддерживать безопасные и четкие процессы бронирования, обеспечивая соответствие законодательным нормам и правилам.

## Предусловия:
- Квартиросъёмщик и владелец зарегистрированы и аутентифицированы в системе.
- Квартиросъёмщик ранее выбрал жильё и инициировал процесс бронирования.
- Все данные о пользователях, бронированиях и недвижимости актуальны.

## Результаты (Постусловия):
- Бронирование успешно подтверждено, изменено или отменено в зависимости от действий пользователя.
- Владелец уведомлен о состоянии бронирования (подтверждено, отменено, изменено).
- Система обновила данные о доступности жилья и статусе бронирования.

## Основной успешный сценарий:
1. **Просмотр текущего бронирования:**
   - Квартиросъёмщик переходит в раздел управления бронированием на платформе.
   - Система вызывает метод `BookingManager.getBookingByID(bookingID)` для получения актуальной информации о статусе бронирования.

2. **Изменение или отмена бронирования квартиросъёмщиком:**
   - Квартиросъёмщик выбирает опцию изменить или отменить бронирование.
   - Система вызывает метод `BookingManager.getBookingByID(bookingID)` для получения актуальной информации, а затем метод `Booking::cancel()` для отмены бронирования или `Booking::modify()` для изменения данных бронирования.
   - После изменения или отмены, система обновляет статус бронирования и уведомляет владельца и квартиросъёмщика через метод `NotificationModule.notifyObservers()`.

3. **Подтверждение или изменение бронирования владельцем:**
   - Владелец получает уведомление о новом бронировании через метод `NotificationModule.notifyObservers()`, с указанием всех данных бронирования.
   - Владелец может подтвердить или отклонить бронирование через метод `Booking::confirm()` или `Booking::reject()`, что будет отражено в системе.

4. **Уведомление участников:**
   - Система уведомляет квартиросъёмщика и владельца о любых изменениях в бронировании через метод `NotificationModule.notifyObservers()`.

## Варианты альтернативных решений:
- *1.1 Квартиросъёмщик не может изменить бронирование:*
  - Система отображает сообщение о невозможности изменения бронирования (например, если осталось слишком мало времени до начала аренды).
  - Квартиросъёмщик может связаться с владельцем через встроенный чат (используя класс `Message`), чтобы обсудить ситуацию.

- *2.1 Владелец отклоняет бронирование:*
  - Владелец отклоняет запрос на бронирование через интерфейс системы.
  - Система вызывает метод `Booking::reject()`, уведомляя квартиросъёмщика об отказе через `NotificationModule.notifyObservers()`.

- *2.2 Квартиросъёмщик запрашивает продление бронирования:*
  - Квартиросъёмщик запрашивает продление текущего бронирования.
  - Система вызывает метод `Booking::extend()` для проверки возможности продления и уведомляет владельца через `NotificationModule.notifyObservers()`.

## Специальные требования:
- Система должна обеспечивать удобное управление бронированиями, с возможностью просматривать детали, изменять или отменять бронирования.
- Все изменения бронирований должны быть немедленно зафиксированы в системе.
- Для отслеживания действий пользователей система должна вести журнал операций, который доступен для администратора.

## Список технологий и типов данных:
- Информация о бронировании включает:
  - **ID:** UUID
  - **Даты начала и окончания:** `Date`
  - **Стоимость:** `Decimal`
  - **Статус:** `String` (например, "подтверждено", "ожидает подтверждения", "отменено")
- Данные передаются между пользователями и владельцами через встроенные уведомления и чаты (класс `Message`).

## Частота использования:
- Средняя частота использования, увеличивающаяся в пиковые периоды (например, в сезон отпусков), когда количество бронирований возрастает.

## Открытые вопросы:
- Нужно ли предусмотреть возможность автоматического продления бронирования без участия владельца?
- Какие дополнительные параметры можно включить в процесс изменения бронирования (например, изменения условий оплаты)?
