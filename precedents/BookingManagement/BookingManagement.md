
# Описание прецедента: "Управление бронированием"

**Информационная система жилищного агентства.**

**Уровень:** Задача, определенная пользователем.

## Основные исполнители:
- Квартиросъёмщик (Tenant)
- Владелец (Owner)
- Администратор (Administrator)

---

## Заинтересованные лица и их требования:
- **Квартиросъёмщик:**
  - Управлять своими бронированиями (просматривать, изменять или отменять).
  - Получать уведомления о состоянии бронирования.

- **Владелец:**
  - Получать уведомления о новых бронированиях.
  - Подтверждать, отклонять или изменять бронирования.

- **Администратор системы:**
  - Следить за корректностью операций.
  - Обеспечивать возможность аудита действий пользователей.

- **Компания:**
  - Поддерживать процессы бронирования в рамках законодательства.
  - Предоставлять удобный и надежный сервис.

---

## Предусловия:
- Квартиросъёмщик и владелец зарегистрированы и аутентифицированы в системе.
- Данные о недвижимости и доступности актуальны.
- Система корректно функционирует.

---

## Результаты (Постусловия):
1. Бронирование успешно подтверждено, изменено или отменено.
2. Уведомления о состоянии бронирования отправлены квартиросъёмщику и владельцу.
3. Статус недвижимости и бронирования обновлён в системе.

---

## Основной успешный сценарий:

1. **Просмотр информации о бронировании:**
    - Квартиросъёмщик заходит в раздел "Управление бронированиями".
    - Система вызывает метод `BookingManager.getBookingByID(bookingID)` для получения информации о статусе бронирования.
    - Информация отображается пользователю.

2. **Изменение или отмена бронирования квартиросъёмщиком:**
    - Квартиросъёмщик выбирает изменить или отменить бронирование.
    - Система вызывает метод `BookingManager.getBookingByID(bookingID)` для получения текущих данных.
    - Для отмены вызывается метод `BookingManager.cancelBooking(bookingID)`.
    - Для изменения данных вызывается метод `BookingManager.updateBooking(bookingID, updatedBooking)`.
    - Система обновляет статус бронирования и уведомляет владельца через `Notification.notifyObservers(notification)`.

3. **Подтверждение или изменение бронирования владельцем:**
    - Владелец получает уведомление о новом бронировании через `Notification.notifyObservers(notification)`.
    - Для подтверждения бронирования вызывается метод `BookingManager.confirmBooking(bookingID)`.
    - Для отклонения бронирования используется метод `BookingManager.rejectBooking(bookingID)`.
    - После подтверждения или отклонения система обновляет статус и уведомляет квартиросъёмщика.

4. **Уведомление участников:**
    - Все изменения статуса бронирования фиксируются в системе.
    - Уведомления отправляются через `Notification.notifyObservers(notification)`.

---

## Варианты альтернативных решений:

1. **Некорректное изменение бронирования:**
    - Если изменение невозможно (например, из-за отсутствия доступности), система отображает соответствующее сообщение.
    - Квартиросъёмщик может связаться с владельцем через `Message` для уточнения деталей.

2. **Отклонение бронирования владельцем:**
    - Если владелец отклоняет запрос, вызывается метод `BookingManager.rejectBooking(bookingID)`.
    - Система уведомляет квартиросъёмщика об отказе.

3. **Запрос продления бронирования:**
    - Квартиросъёмщик запрашивает продление через `BookingManager.extendBooking(bookingID, newEndDate)`.
    - Система уведомляет владельца для подтверждения.

---

## Специальные требования:
- Все действия должны фиксироваться с минимальной задержкой.
- Система должна предоставлять интерфейс для просмотра истории бронирований.
- Уведомления должны быть отправлены на e-mail и отображены в личном кабинете.

---

## Открытые вопросы:
1. Следует ли предусмотреть автоматическое продление бронирования без подтверждения владельца?
2. Какие дополнительные метрики важны для мониторинга операций бронирования?
